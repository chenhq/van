/ is there a better way to repeat without actually affecting the page?
%nil{"ng-controller" => "PulldownCtrl", "ng-repeat" => "pulldown in dashboard.current.pulldowns", "ng-show" => "pulldown.enable"}
  .top-row-close.pointer.pull-left{"bs-tooltip" => "'Toggle '+pulldown.type", "data-placement" => "bottom", "ng-class" => "pulldownTabStyle($index)", "ng-click" => "toggle_pulldown(pulldown);dismiss();"}
    %span.small {{pulldown.type}}
    %i.small{"ng-class" => "{'icon-caret-left':pulldown.collapse,'icon-caret-right':!pulldown.collapse}"}
    %i.small.icon-star{"ng-show" => "row.notice && pulldown.collapse"}
  .clearfix.bgNav{"ng-hide" => "pulldown.collapse"}
  .top-row-open{"ng-hide" => "pulldown.collapse"}
    %kibana-simple-panel{"ng-cloak" => "", :type => "pulldown.type"}
.clearfix.bgNav
.container-fluid.main
  %div
    .kibana-container.container
      / Rows
      .kibana-row{"ng-controller" => "RowCtrl", "ng-repeat" => "(row_name, row) in dashboard.current.rows", "ng-style" => "row_style(row)"}
        .row-control
          %div{:style => "padding:0px;margin:0px;position:relative;"}
            .row-close{"data-placement" => "bottom", "ng-show" => "row.collapse"}
              %span.pointer{"config-modal" => "app/partials/roweditor.html", "kbn-model" => "row"}
                %i.icon-cog.pointer{"bs-tooltip" => "'Configure row'", "data-placement" => "right", "ng-show" => "row.editable"}
              %span.row-button.bgPrimary{"ng-click" => "toggle_row(row)", "ng-show" => "row.collapsable"}
                %i.icon-caret-left.pointer{"bs-tooltip" => "'Expand row'", "data-placement" => "right", "ng-show" => "row.collapsable"}
              %span.row-button.row-text{"ng-class" => "{'pointer':row.collapsable}", "ng-click" => "toggle_row(row)"} {{row.title || 'Row '+$index}}
            .row-open{"ng-show" => "!row.collapse", :style => "text-align:center"}
              .row-tab.bgPrimary{"ng-click" => "toggle_row(row)", "ng-show" => "row.collapsable"}
                %i.icon-caret-right{"bs-tooltip" => "'Collapse row'", "data-placement" => "right"}
                %br/
              .row-tab.bgWarning{"config-modal" => "app/partials/roweditor.html", "kbn-model" => "row", "ng-show" => "row.editable"}
                %i.icon-cog.pointer{"bs-tooltip" => "'Configure row'", "data-placement" => "right"}
                %br/
              .bgSuccess.row-tab{"config-modal" => "app/partials/roweditor.html", "kbn-model" => "row", "ng-click" => "editor.index = 2", "ng-show" => "row.editable"}
                %i.icon-plus-sign{"bs-tooltip" => "'Add Panel'", "data-placement" => "right"}
                %br/
          %div{"ng-if" => "!row.collapse", :style => "padding-top:0px"}
            / All the panels in the row
            .panel.nospace{"data-drop" => "true", "data-jqyoui-options" => "", "jqyoui-droppable" => "{index:$index,mutate:false,onDrop:'panelMoveDrop',onOver:'panelMoveOver(true)',onOut:'panelMoveOut'}", "kibana-panel" => "", "ng-class" => "{'dragInProgress':dashboard.panelDragging}", "ng-cloak" => "", "ng-hide" => "panel.hide", "ng-model" => "row.panels", "ng-repeat" => "(name, panel) in row.panels|filter:isPanel", "ng-style" => "{'width':!panel.span?'100%':((panel.span/1.2)*10)+'%'}", :resizable => "", :style => "position:relative", :type => "panel.type"}
            / A suggestion filler panel that appears when a panel is being dragged, but there is no panels in the row to drop it on
            .panel.panel-filler{"data-drop" => "true", "data-jqyoui-options" => "", "jqyoui-droppable" => "{index:row.panels.length,mutate:false,onDrop:'panelMoveDrop',onOver:'panelMoveOver',onOut:'panelMoveOut'}", "ng-class" => "{'dragInProgress':dashboard.panelDragging}", "ng-model" => "row.panels", "ng-show" => "dashboard.panelDragging && row.panels.length == 0", "ng-style" => "{height:row.height}", :style => ""}
              %h1 Drop here to add to this row
              Or drop on top of any other panel to insert in that row
            %span{"config-modal" => "app/partials/roweditor.html", "kbn-model" => "row", "ng-show" => "row.editable && !dashboard.panelDragging"}
              %span.btn.btn-mini{"ng-click" => "editor.index = 2", "ng-show" => "row.panels.length==0", :style => "margin-top: 3px; margin-left: 5px"} Add panel to empty row
            .clearfix
      .row-fluid{"ng-show" => "dashboard.current.editable"}
        .span12{:style => "text-align:right;"}
          %span.pointer.btn.btn-mini.row-add-button{"config-modal" => "app/partials/dasheditor.html", "kbn-model" => "dashboard"}
            %span{"ng-click" => "editor.index = 2"}
              %i.icon-plus-sign
              ADD A ROW
