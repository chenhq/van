.modal-body
  .pull-right.editor-title Row settings
  %div{"bs-tabs" => "", "ng-model" => "editor.index"}
    %div{"data-title" => "{{tab}}", "ng-repeat" => "tab in ['General','Panels','Add Panel']"}
  .editor-row{"ng-if" => "editor.index == 0"}
    .editor-option
      %label.small Title
      %input.input-medium{"ng-model" => "row.title", :type => "text"}/
    .editor-option
      %label.small Height
      %input.input-mini{"ng-model" => "row.height", :type => "text"}/
    .editor-option
      %label.small Editable
      %input{"ng-checked" => "row.editable", "ng-model" => "row.editable", :type => "checkbox"}/
    .editor-option
      %label.small Collapsable
      %input{"ng-checked" => "row.collapsable", "ng-model" => "row.collapsable", :type => "checkbox"}/
  .row-fluid{"ng-if" => "editor.index == 1"}
    .span12
      %h4 Panels
      %table.table.table-condensed.table-striped
        %thead
          %th Title
          %th Type
          %th
            Span
            %span.small ({{rowSpan(row)}}/12)
          %th Delete
          %th Move
          %th
          %th Hide
        %tr{"ng-repeat" => "panel in row.panels"}
          %td {{panel.title}}
          %td {{panel.type}}
          %td
            %select.input-mini{"ng-hide" => "panel.sizeable == false", "ng-model" => "panel.span", "ng-options" => "size for size in [1,2,3,4,5,6,7,8,9,10,11,12]"}
          %td
            %i.pointer.icon-remove{"ng-click" => "row.panels = _.without(row.panels,panel)"}
          %td
            %i.pointer.icon-arrow-up{"ng-click" => "_.move(row.panels,$index,$index-1)", "ng-hide" => "$first"}
          %td
            %i.pointer.icon-arrow-down{"ng-click" => "_.move(row.panels,$index,$index+1)", "ng-hide" => "$last"}
          %td
            %input{"ng-checked" => "panel.hide", "ng-model" => "panel.hide", :type => "checkbox"}/
  .row-fluid{"ng-if" => "editor.index == 2"}
    %h4 Select Panel Type
    %form.form-inline
      %select.input-medium{"ng-model" => "panel.type", "ng-options" => "panelType for panelType in dashboard.availablePanels|stringSort"}
      %small{"ng-show" => "rowSpan(row) > 11"}
        Note: This row is full, new panels will wrap to a new line. You should add another row.
    %div{"ng-show" => "!(_.isUndefined(panel.type))"}
      %div{"add-panel" => "{{panel.type}}"}
.modal-footer
  %button.btn.btn-info{"ng-click" => "editor.index = 2;", "ng-disabled" => "panel.loadingEditor", "ng-show" => "editor.index == 1"} Add Panel
  %button.btn.btn-success{"ng-click" => "editSave(row);add_panel(row,panel);reset_panel();editor.index = 0;dismiss();", "ng-disabled" => "panel.loadingEditor", "ng-show" => "panel.type && editor.index == 2"} Save
  %button.btn.btn-success{"ng-click" => "editor.index=0;editSave(row);dismiss();reset_panel();close_edit()", "ng-hide" => "panel.type && editor.index == 2"} Save
  %button.btn.btn-danger{"ng-click" => "editor.index=0;dismiss();reset_panel();close_edit()", :type => "button"} Cancel
